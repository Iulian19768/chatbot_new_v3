<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Chatbot</title>
    <style>
        body {
            font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
        }

        .testbtn{
            position: fixed;
            bottom: 200px;
            right: 100px;
            width: 50px;
            height: 50px;
        }
    </style>
</head>
<body>
    <h1>Welcome to My Website</h1>
    <button class="testbtn">TEST BUTTON </button>
    <!--<script src="https://chatbotnewv3-production.up.railway.app/static/embed_widget.js"></script>-->
    <!--<script src="https://chatbotnewv3-production.up.railway.app/static/chatbot-widget-test.js"></script>
    <script>
        window.initChatbot({
            url: "https://chatbotnewv3-production.up.railway.app/",
            width: "350px",
            height: "570px",
            color: "#516c96"  // This color will be applied to all the specified elements
        });
    </script>-->
    <script>
        window.initChatbot = function(options) {
            var iframe = document.createElement('iframe');
            
            // Add the color setting as a query parameter to the URL
            var url = new URL(options.url || "https://chatbotnewv3-production.up.railway.app/");
            if (options.color) {
                url.searchParams.set('color', options.color);
            }
            if (options.buttonId) {
                url.searchParams.set('buttonId', options.buttonId);
            }
    
            // Define the dimensions for even and odd clicks
            let evenWidth = '100px';
            let evenHeight = '100px';
            let oddWidth = options.width || '350px';
            let oddHeight = options.height || '570px';
    
            // Set initial dimensions for closed state (even click count)
            iframe.style.width = evenWidth;
            iframe.style.height = evenHeight;
    
            iframe.src = url.toString();
            iframe.style.position = 'fixed';
            iframe.style.bottom = options.bottom || '20px';
            iframe.style.right = options.right || '20px';
            iframe.style.border = 'none';
            iframe.style.zIndex = '9999';
            iframe.id = "chatbot-iframe";
            iframe.style.transition = 'width 0.3s, height 0.3s'; // Smooth transition effect
    
            document.body.appendChild(iframe);
    
            let clickCount = 0;
    
            // Function to toggle the iframe size based on the number of clicks
            function toggleChatboxSize() {
                clickCount++;
                if (clickCount % 2 === 0) {
                    iframe.style.width = evenWidth;
                    iframe.style.height = evenHeight;
                } else {
                    iframe.style.width = oddWidth;
                    iframe.style.height = oddHeight;
                }
            }
    
            // Listen for the message from the iframe
            window.addEventListener('message', function(event) {
                if (event.data && event.data.action === 'toggleChatbox') {
                    toggleChatboxSize();
                }
            });
        };
    
        // Initialize the chatbot with your specific options
        window.initChatbot({
            url: "https://chatbotnewv3-production.up.railway.app/",
            width: "350px",
            height: "570px",
            color: "#516c96",
            buttonId: "testButton"  // The ID of the button inside the iframe
        });
    </script>
    
    
    
    <script>
        // Wait for the DOM content to fully load
        document.addEventListener('DOMContentLoaded', function() {
            // Select the button using its class
            const button = document.querySelector('.testbtn');

            // Add a click event listener to the button
            button.addEventListener('click', function() {
                // Log a message to the console
                console.log('Button was clicked!');
            });
        });
    </script>
    
    
    
    
</body>
</html>
